"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{7052:function(e,t,i){i.r(t),i.d(t,{default:function(){return f}});var s=i(7437),r=i(2265),n=i(8155),a=i(9374),o=i(6070),l=i(5974),c=i(2759),d=i(1239),h=i(1723),m=i(9474);let g=(0,i(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=i(8614),w=i(8239),x=i(8415),b=i(257);let p=[{id:1,capacity:10,balls:[{id:1,weight:6,reward:18,color:"bg-red-500"},{id:2,weight:4,reward:12,color:"bg-blue-500"},{id:3,weight:3,reward:9,color:"bg-green-500"}],solution:[1,2],difficulty:"easy"},{id:2,capacity:12,balls:[{id:1,weight:5,reward:15,color:"bg-purple-500"},{id:2,weight:7,reward:21,color:"bg-yellow-500"},{id:3,weight:4,reward:12,color:"bg-pink-500"},{id:4,weight:3,reward:9,color:"bg-indigo-500"}],solution:[2,3],difficulty:"easy"},{id:3,capacity:15,balls:[{id:1,weight:8,reward:24,color:"bg-red-500"},{id:2,weight:6,reward:18,color:"bg-blue-500"},{id:3,weight:5,reward:15,color:"bg-green-500"},{id:4,weight:4,reward:12,color:"bg-yellow-500"}],solution:[1,2],difficulty:"easy"},{id:4,capacity:18,balls:[{id:1,weight:9,reward:27,color:"bg-orange-500"},{id:2,weight:7,reward:21,color:"bg-teal-500"},{id:3,weight:6,reward:18,color:"bg-rose-500"},{id:4,weight:5,reward:15,color:"bg-cyan-500"},{id:5,weight:4,reward:12,color:"bg-lime-500"}],solution:[1,2],difficulty:"medium"},{id:5,capacity:20,balls:[{id:1,weight:10,reward:30,color:"bg-red-500"},{id:2,weight:8,reward:24,color:"bg-blue-500"},{id:3,weight:6,reward:18,color:"bg-green-500"},{id:4,weight:5,reward:15,color:"bg-yellow-500"},{id:5,weight:4,reward:12,color:"bg-purple-500"}],solution:[1,2],difficulty:"medium"},{id:6,capacity:22,balls:[{id:1,weight:12,reward:36,color:"bg-indigo-500"},{id:2,weight:10,reward:30,color:"bg-pink-500"},{id:3,weight:8,reward:24,color:"bg-orange-500"},{id:4,weight:6,reward:18,color:"bg-teal-500"},{id:5,weight:5,reward:15,color:"bg-rose-500"}],solution:[1,2],difficulty:"medium"},{id:7,capacity:25,balls:[{id:1,weight:15,reward:45,color:"bg-cyan-500"},{id:2,weight:12,reward:36,color:"bg-lime-500"},{id:3,weight:10,reward:30,color:"bg-amber-500"},{id:4,weight:8,reward:24,color:"bg-emerald-500"},{id:5,weight:6,reward:18,color:"bg-violet-500"}],solution:[1,4],difficulty:"medium"},{id:8,capacity:30,balls:[{id:1,weight:18,reward:54,color:"bg-red-500"},{id:2,weight:15,reward:45,color:"bg-blue-500"},{id:3,weight:12,reward:36,color:"bg-green-500"},{id:4,weight:10,reward:30,color:"bg-yellow-500"},{id:5,weight:8,reward:24,color:"bg-purple-500"},{id:6,weight:6,reward:18,color:"bg-pink-500"}],solution:[1,3],difficulty:"hard"},{id:9,capacity:35,balls:[{id:1,weight:20,reward:60,color:"bg-indigo-500"},{id:2,weight:18,reward:54,color:"bg-orange-500"},{id:3,weight:15,reward:45,color:"bg-teal-500"},{id:4,weight:12,reward:36,color:"bg-rose-500"},{id:5,weight:10,reward:30,color:"bg-cyan-500"},{id:6,weight:8,reward:24,color:"bg-lime-500"}],solution:[1,3],difficulty:"hard"},{id:10,capacity:40,balls:[{id:1,weight:25,reward:75,color:"bg-amber-500"},{id:2,weight:20,reward:60,color:"bg-emerald-500"},{id:3,weight:18,reward:54,color:"bg-violet-500"},{id:4,weight:15,reward:45,color:"bg-sky-500"},{id:5,weight:12,reward:36,color:"bg-stone-500"},{id:6,weight:10,reward:30,color:"bg-red-500"}],solution:[1,4],difficulty:"hard"}];function f(e){let{onNext:t,updateParticipantData:i}=e,[f,j]=(0,r.useState)(0),[y,N]=(0,r.useState)([]),[T,v]=(0,r.useState)(!0),I=(0,n.n1)(),[S,q]=(0,r.useState)(0),[k,D]=(0,r.useState)(900),[C,O]=(0,r.useState)(0),[Z,A]=(0,r.useState)(!1),E=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(!T&&k>0&&!Z){let e=setInterval(()=>{D(t=>t<=1?(clearInterval(e),_(),0):t-1)},1e3);return()=>clearInterval(e)}},[T,k,Z]);let Y=()=>{f<p.length-1?(j(e=>e+1),O(Date.now())):z()},_=()=>{if(E.current)return;let e=p.slice(f).map(e=>({questionId:e.id,selected:[],correct:!1,timeSpent:0}));N(t=>[...t,...e]),z()},z=async()=>{if(E.current)return;E.current=!0,A(!0);let e=y.filter(e=>e.correct).length,t=y.filter(e=>e.selected.length>0&&!e.correct).length,s=p.length-e-t,r=2*e+1*s+0*t,n=2*p.length,a={phase:"skill",participantId:localStorage.getItem("participantId"),data:{completed:!0,correctAnswers:e,incorrectAnswers:t,unansweredQuestions:s,totalPoints:r,maxPoints:n,totalQuestions:p.length,accuracy:e/p.length,timeUsed:900-k,answers:y,questionTimes:y.map(e=>({questionId:e.questionId,startTime:0,endTime:0,timeSpent:e.timeSpent}))}};try{let e=b.env.NEXT_PUBLIC_API_BASE||"https://knapsack-expirement.onrender.com";if(!(await fetch("".concat(e,"/api/v1/ingest-phase"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to submit test data");console.log("[Test 1] Submission successful ✅"),i({training2:a.data,totalScore:r})}catch(e){console.error("[Test 1] Submission failed ❌",e),alert("There was an error submitting your test results.")}},M=p[f],P=(f+1)/p.length*100,Q={easy:"bg-green-500",medium:"bg-yellow-500",hard:"bg-red-500"}[M.difficulty];if(T)return(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)(o.Zb,{className:"shadow-lg",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)(o.ll,{className:"flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-6 w-6 mr-2 text-orange-600"}),"Test 1 - Instructions"]})}),(0,s.jsxs)(o.aY,{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-8",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold text-orange-800 mb-6",children:"Test 1"}),(0,s.jsxs)("div",{className:"space-y-6 text-orange-700",children:[(0,s.jsxs)("p",{className:"text-xl",children:["In this section, you will complete ",(0,s.jsx)("strong",{children:"10 questions"})," in Test 1. Once you start, you will have ",(0,s.jsx)("strong",{children:"90 seconds on each question"}),"."]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,s.jsxs)("h4",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"Rules"]}),(0,s.jsxs)("ul",{className:"text-lg space-y-3",children:[(0,s.jsx)("li",{children:"• You have 90 seconds to complete each question."}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"You cannot come back to previous questions after seeing later questions"}),", so answer questions you wish before moving on."]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Guessing is penalized!"})," Please only answer questions you wish to answer."]}),(0,s.jsx)("li",{children:"• Only questions confirmed are considered answered, unconfirmed questions are considered unanswered!"}),(0,s.jsx)("li",{children:"• Auto-submit when time runs out."})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,s.jsxs)("h4",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Scoring"]}),(0,s.jsxs)("ul",{className:"text-lg space-y-3",children:[(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Correct answers"}),": You are rewarded 2 ",(0,s.jsx)("strong",{children:"probability points"})]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Incorrect answers"}),": You are NOT rewarded ",(0,s.jsx)("strong",{children:"probability points"})]}),(0,s.jsxs)("li",{children:["• ",(0,s.jsx)("strong",{children:"Unanswered questions"}),": You are rewarded 1 ",(0,s.jsx)("strong",{children:"probability point"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-red-100 border border-red-300 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)(g,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsx)("h4",{className:"text-xl font-semibold text-red-800",children:"Important Reminders"})]}),(0,s.jsxs)("ul",{className:"text-lg text-red-700 space-y-3",children:[(0,s.jsx)("li",{children:"• If you attempted a question but do not wish to answer it, no need to deselect the balls, just leave the question unconfirmed."}),(0,s.jsx)("li",{children:"• Focus on accuracy over speed."})]})]})]})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)(a.z,{onClick:()=>{v(!1),q(Date.now()),O(Date.now())},size:"lg",className:"bg-orange-600 hover:bg-orange-700",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"Start Test 1"]})})]})]})});if(Z){let e=y.filter(e=>e.correct).length,i=y.filter(e=>0===e.selected.length).length,r=y.filter(e=>e.selected.length>0&&!e.correct).length,n=2*e+1*i+0*r,l=2*p.length;return(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)(o.Zb,{className:"shadow-lg",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)(o.ll,{className:"flex items-center",children:[(0,s.jsx)(m.Z,{className:"h-6 w-6 mr-2 text-green-600"}),"Test 1 Complete!"]})}),(0,s.jsx)(o.aY,{className:"space-y-6",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-8 rounded-xl",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Your Performance Summary"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-green-600",children:e}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Correct"})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:i}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Unanswered"})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-red-600",children:r}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Incorrect"})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border-2 border-blue-500",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[n,"/",l]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Points Earned"})]})]}),(0,s.jsxs)("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-4 mb-6",children:[(0,s.jsxs)("p",{className:"text-blue-800 font-medium",children:["You earned ",(0,s.jsxs)("strong",{children:[n," out of ",l]})," points!"]}),(0,s.jsx)("p",{className:"text-blue-700 text-sm mt-2",children:"Scoring: 2 points per correct answer, 1 point per unanswered question, 0 points per incorrect answer."})]}),(0,s.jsx)(a.z,{onClick:t,size:"lg",children:"Continue to Test 2"})]})})})]})})}return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsx)(o.Zb,{children:(0,s.jsxs)(o.aY,{className:"p-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-sm font-medium",children:["Question ",f+1," of ",p.length]}),(0,s.jsx)(l.C,{className:"text-white ".concat(Q),children:M.difficulty.toUpperCase()})]})}),(0,s.jsx)(c.E,{value:P,className:"h-2"})]})}),(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-center",children:(0,s.jsx)("p",{className:"text-red-700 font-medium text-sm",children:"\uD83D\uDEA8 Confirm answers or they will be considered unanswered!"})}),(0,s.jsx)(u.M,{mode:"wait",children:(0,s.jsx)(w.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:(0,s.jsx)(x.Z,{question:M,onAnswer:(e,t)=>{if(E.current)return;let i=Date.now()-C,s=p[f].id;I.logInteraction("answer_confirmed",{questionId:s,selectedBalls:e,isCorrect:t,timeSpent:i,timestamp:new Date().toISOString()});let r={questionId:s,selected:e,correct:t,timeSpent:i};N(e=>[...e,r]),Y()},onSkip:()=>{if(E.current)return;let e=Date.now()-C,t={questionId:p[f].id,selected:[],correct:!1,timeSpent:Math.round(e/1e3)};N(e=>[...e,t]),Y()},isInteractive:!0,isTestMode:!0,timeLimit:90,onTimeUp:()=>{let e=Date.now()-C,t={questionId:M.id,selected:[],correct:!1,timeSpent:Math.round(e/1e3)};N(e=>[...e,t]),Y()}})},"question-".concat(f))})]})}},8155:function(e,t,i){i.d(t,{n1:function(){return n}});class s{startSection(e){this.sectionName=e,this.questionId=null,this.startTime=new Date,this.endTime=null,this.interactions=[],console.log("[TimeTracker] Started section: ".concat(e)),this.logTimeData({sectionName:e,timeData:{startTime:this.startTime.toISOString()}})}startQuestion(e,t){t&&(this.sectionName=t),this.questionId=e,this.startTime=new Date,this.endTime=null,this.interactions=[],console.log("[TimeTracker] Started question ".concat(e," in section ").concat(this.sectionName))}endQuestion(){if(!this.startTime||!this.questionId||!this.sectionName){console.warn("[TimeTracker] Cannot end question - missing start time, question ID, or section");return}this.endTime=new Date;let e=this.endTime.getTime()-this.startTime.getTime();console.log("[TimeTracker] Question ".concat(this.questionId," completed in ").concat(e,"ms")),this.logTimeData({sectionName:this.sectionName,questionId:this.questionId,timeData:{startTime:this.startTime.toISOString(),endTime:this.endTime.toISOString(),timeSpent:e}})}endSection(){if(!this.startTime||!this.sectionName){console.warn("[TimeTracker] Cannot end section - missing start time or section name");return}this.endTime=new Date;let e=this.endTime.getTime()-this.startTime.getTime();console.log("[TimeTracker] Section ".concat(this.sectionName," completed in ").concat(e,"ms")),this.logTimeData({sectionName:this.sectionName,timeData:{endTime:this.endTime.toISOString(),timeSpent:e}})}logInteraction(e,t){let i={type:e,timestamp:new Date,data:t};this.interactions.push(i),this.questionId&&this.sectionName&&this.logTimeData({sectionName:this.sectionName,questionId:this.questionId,interactionType:e,timeData:{interactionData:t}})}async logTimeData(e){if(!this.participantId){console.warn("[TimeTracker] No participant ID available for logging");return}try{let t=await fetch("".concat("https://knapsack-expirement.onrender.com","/api/v1/log-time"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({participantId:this.participantId,...e})});t.ok||console.error("[TimeTracker] Failed to log time data:",t.status)}catch(e){console.error("[TimeTracker] Error logging time data:",e)}}getCurrentTime(){if(!this.startTime)return null;let e=new Date;return{startTime:this.startTime,currentTime:e,elapsed:e.getTime()-this.startTime.getTime(),sectionName:this.sectionName,questionId:this.questionId,interactionCount:this.interactions.length}}reset(){this.startTime=null,this.endTime=null,this.sectionName=null,this.questionId=null,this.interactions=[]}constructor(e){this.startTime=null,this.endTime=null,this.participantId=null,this.sectionName=null,this.questionId=null,this.interactions=[],this.participantId=e||localStorage.getItem("participantId")}}let r=new s,n=()=>r},1239:function(e,t,i){i.d(t,{Z:function(){return s}});let s=(0,i(9205).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}}]);