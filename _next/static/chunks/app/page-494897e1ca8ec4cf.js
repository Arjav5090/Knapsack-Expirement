(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6909:function(e,s,t){Promise.resolve().then(t.bind(t,5955))},5955:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return eh}});var a=t(7437),r=t(2265),l=t(7796),i=t(1994),n=t(3335);function c(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,i.W)(s))}let o=r.forwardRef((e,s)=>{let{className:t,value:r,...i}=e;return(0,a.jsx)(l.fC,{ref:s,className:c("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,a.jsx)(l.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});o.displayName=l.fC.displayName;var d=t(535);let x=(0,d.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function m(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:c(x({variant:t}),s),...r})}var h=t(7414),u=t(4972),g=t(8896),b=t(1723),p=t(9474),j=t(8239),f=t(8614),w=t(5293);let y=(0,d.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:i=!1,...n}=e,o=i?w.g7:"button";return(0,a.jsx)(o,{className:c(y({variant:r,size:l,className:t})),ref:s,...n})});N.displayName="Button";let v=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});v.displayName="Card";let k=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("flex flex-col space-y-1.5 p-6",t),...r})});k.displayName="CardHeader";let S=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("text-2xl font-semibold leading-none tracking-tight",t),...r})});S.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let C=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("p-6 pt-0",t),...r})});C.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";var T=t(6858);function q(e){let{onNext:s}=e,[t,l]=(0,r.useState)(!1);return t?(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsx)(j.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:(0,a.jsxs)(v,{className:"shadow-lg border-0 bg-gradient-to-br from-blue-50 to-indigo-50",children:[(0,a.jsxs)(k,{className:"pb-4",children:[(0,a.jsx)("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(p.Z,{className:"h-10 w-10 text-white"})}),(0,a.jsx)(S,{className:"text-3xl font-bold text-gray-900 mb-2",children:"The Knapsack Challenge"})]}),(0,a.jsx)(C,{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-sm",children:[(0,a.jsx)("p",{className:"text-lg text-gray-700 mb-6",children:"To win the prize, you will be asked to complete quizzes containing algorithm puzzles that are canonically called the 0-1 knapsack puzzle. Your performance on the quizzes will determine the chances you win the prizes. In the next section, we will explain what the knapsack questions is and give you opportunities to familiarize with sample questions you might see in the quizzes after."}),(0,a.jsxs)(N,{onClick:s,size:"lg",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-3 text-lg",children:["Continue to Instructions",(0,a.jsx)(T.Z,{className:"ml-2 h-5 w-5"})]})]})})]})})}):(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsx)(j.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:(0,a.jsxs)(v,{className:"text-center shadow-lg border-0 bg-gradient-to-br from-blue-50 to-indigo-50",children:[(0,a.jsxs)(k,{className:"pb-4",children:[(0,a.jsx)("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(h.Z,{className:"h-10 w-10 text-white"})}),(0,a.jsx)(S,{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome to Our Experiment"})]}),(0,a.jsx)(C,{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-sm",children:[(0,a.jsx)("p",{className:"text-lg text-gray-700 mb-6",children:"Thank you for participating in our experiment. In the experiment, you will be asked to complete a series of questions for chances to win a prize! You may click next to begin the experiment."}),(0,a.jsxs)(N,{onClick:()=>l(!0),size:"lg",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-3 text-lg",children:["Next",(0,a.jsx)(T.Z,{className:"ml-2 h-5 w-5"})]})]})})]})})})}var P=t(4794),E=t(1671),I=t(9388),Z=t(9322),z=t(5252),A=t(9232),F=t(4410),D=t(5368);function O(e){let{question:s,onAnswer:t,onSkip:l,showSolution:i=!1,isInteractive:n=!0,isTestMode:c=!1,timeLimit:o,onTimeUp:d,initialSelection:x=[],isConfirmed:h=!1}=e,[u,g]=(0,r.useState)(x),[b,p]=(0,r.useState)(h),[w,y]=(0,r.useState)(o||0),[v,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{g(x),p(h)},[s.id]),(0,r.useEffect)(()=>{if(o&&w>0&&!b){let e=setInterval(()=>{y(e=>(e<=16&&e>15&&k(!0),e<=1)?(null==d||d(),0):e-1)},1e3);return()=>clearInterval(e)}},[o,b]),(0,r.useEffect)(()=>{o&&y(o)},[o]);let S=e=>{if(!n||b){console.log("Cannot toggle - not interactive or already submitted");return}console.log("Toggling ball:",e),g(s=>{let t=s.includes(e)?s.filter(s=>s!==e):[...s,e];return console.log("New selection:",t),t})},C=e=>e.reduce((e,t)=>{let a=s.balls.find(e=>e.id===t);return a&&(e.weight+=a.weight,e.reward+=a.reward),e},{weight:0,reward:0}),T=C(u),q=s.solution?C(s.solution):null,I=T.weight>s.capacity;return(0,a.jsxs)("div",{className:"space-y-6",children:[o&&(0,a.jsx)(j.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex justify-center",children:(0,a.jsx)("div",{className:"px-4 py-2 rounded-xl border-2 shadow-lg ".concat(w<=15?"border-red-500 bg-red-50":"border-blue-500 bg-blue-50"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(j.E.div,{animate:{scale:w<=15?[1,1.2,1]:1},transition:{repeat:w<=15?1/0:0,duration:1},className:"w-3 h-3 rounded-full ".concat(w<=15?"bg-red-500":"bg-blue-500")}),(0,a.jsx)("span",{className:"font-mono text-lg font-bold ".concat(w<=15?"text-red-700":"text-blue-700"),children:"".concat(Math.floor(w/60),":").concat((w%60).toString().padStart(2,"0"))})]})})}),(0,a.jsx)(f.M,{children:v&&(0,a.jsx)(j.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-xl text-center",children:"⚠️ 15 seconds remaining! Remember to confirm your answer!"})}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-2xl p-6 border border-gray-200 shadow-lg",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)(j.E.div,{initial:{scale:.8},animate:{scale:1},className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl mb-3 shadow-lg",children:(0,a.jsx)(P.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Knapsack Problem"}),(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-white rounded-xl px-4 py-2 shadow-md border",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Capacity:"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:s.capacity})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsx)(j.E.div,{whileHover:{scale:1.02},className:"p-4 rounded-xl border-2 transition-all duration-200 ".concat(c||!I?"bg-blue-50 border-blue-200 text-blue-800":"bg-red-50 border-red-200 text-red-800"),children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(c||!I?"bg-blue-100":"bg-red-100"),children:(0,a.jsx)(F.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-medium opacity-80",children:"Total Weight"}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[T.weight," / ",s.capacity]})]})]})}),(0,a.jsx)(j.E.div,{whileHover:{scale:1.02},className:"p-4 rounded-xl bg-emerald-50 border-2 border-emerald-200 text-emerald-800",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-emerald-100",children:(0,a.jsx)(A.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-medium opacity-80",children:"Total Reward"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:T.reward})]})]})})]}),(0,a.jsx)("div",{className:"text-center mb-6",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 bg-white/60 rounded-full px-4 py-2 inline-block",children:["Click items to select • Selected: ",u.length," items"]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6",children:s.balls.map((e,t)=>{var r;let l=u.includes(e.id),c=i&&(null===(r=s.solution)||void 0===r?void 0:r.includes(e.id));return(0,a.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},whileHover:n&&!b?{scale:1.05}:{},whileTap:n&&!b?{scale:.95}:{},className:"relative",children:(0,a.jsxs)("div",{className:"\n                    relative p-4 rounded-2xl border-2 transition-all duration-300 cursor-pointer\n                    ".concat(l?"bg-white border-blue-400 shadow-xl ring-4 ring-blue-200 ring-opacity-50":c?"bg-white border-green-400 shadow-xl ring-4 ring-green-200 ring-opacity-50":"bg-white border-gray-200 shadow-md hover:shadow-lg hover:border-gray-300","\n                    ").concat(!n||b?"cursor-default":"","\n                  "),onClick:()=>S(e.id),children:[(0,a.jsx)("div",{className:"flex justify-center mb-2",children:(0,a.jsx)("div",{className:"\n                        w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-lg\n                        ".concat(e.color,"\n                        ").concat(l?"ring-4 ring-white ring-opacity-50":"","\n                      "),children:e.id})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,a.jsx)(F.Z,{className:"h-5 w-5 text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Weight"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-700",children:e.weight})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5 text-amber-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-amber-600",children:"Reward"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:e.reward})]})]}),l&&(0,a.jsx)(j.E.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center shadow-lg",children:(0,a.jsx)(E.Z,{className:"w-4 h-4 text-white"})}),c&&!l&&(0,a.jsx)(j.E.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute -top-2 -right-2",children:(0,a.jsx)(m,{className:"bg-green-500 text-white text-xs",children:"Solution"})})]})},e.id)})}),n&&!b&&(0,a.jsxs)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-center space-x-4",children:[(0,a.jsx)(N,{onClick:()=>{p(!0);let e=!1;if(s.solution&&!I){let t=s.solution.reduce((e,t)=>{let a=s.balls.find(e=>e.id===t);return e+((null==a?void 0:a.reward)||0)},0);e=u.reduce((e,t)=>{let a=s.balls.find(e=>e.id===t);return e+((null==a?void 0:a.reward)||0)},0)===t}null==t||t(u,e)},disabled:0===u.length,size:"lg",className:"\n                px-8 py-3 rounded-xl font-semibold shadow-lg transition-all duration-200\n                ".concat(!c&&I?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700","\n                disabled:opacity-50 disabled:cursor-not-allowed\n              "),children:!c&&I?"Confirm Answer (Over Capacity)":"Confirm Answer"}),l&&(0,a.jsx)(N,{onClick:l,variant:"outline",size:"lg",className:"px-8 py-3 rounded-xl font-semibold border-2 hover:bg-gray-50 transition-all duration-200",children:"Skip Question"})]}),b&&(0,a.jsx)(j.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-green-500 text-white px-6 py-3 rounded-xl shadow-lg",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Answer Confirmed"})]})}),i&&s.solution&&q&&(0,a.jsxs)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl",children:[(0,a.jsxs)("h4",{className:"font-bold text-green-800 mb-4 flex items-center text-lg",children:[(0,a.jsx)(E.Z,{className:"h-6 w-6 mr-2"}),"Optimal Solution"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-3 text-center",children:[(0,a.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Selected Items"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-800",children:s.solution.join(", ")})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-3 text-center",children:[(0,a.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Total Weight"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-green-800",children:[q.weight,"/",s.capacity]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-3 text-center",children:[(0,a.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Total Reward"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-800",children:q.reward})]})]}),s.explanation&&(0,a.jsx)("p",{className:"text-green-700 text-center bg-white rounded-xl p-4 italic",children:s.explanation})]})]})]})}let Q=[{id:1,capacity:10,balls:[{id:1,weight:6,reward:30,color:"bg-red-500"},{id:2,weight:3,reward:14,color:"bg-blue-500"},{id:3,weight:4,reward:16,color:"bg-green-500"},{id:4,weight:2,reward:9,color:"bg-yellow-500"}],solution:[2,3,4],explanation:"Select balls 2, 3, and 4 for a total weight of 9 (≤10) and reward of 39 points."},{id:2,capacity:15,balls:[{id:1,weight:10,reward:60,color:"bg-purple-500"},{id:2,weight:20,reward:100,color:"bg-pink-500"},{id:3,weight:15,reward:120,color:"bg-indigo-500"}],solution:[3],explanation:"Select ball 3 for maximum reward of 120 points with weight exactly 15."}],M=[{id:"tutorial1",capacity:8,balls:[{id:1,weight:5,reward:20,color:"bg-red-500"},{id:2,weight:3,reward:18,color:"bg-blue-500"},{id:3,weight:4,reward:22,color:"bg-green-500"},{id:4,weight:2,reward:8,color:"bg-yellow-500"}],solution:[2,3],title:"Example 1"},{id:"tutorial2",capacity:12,balls:[{id:1,weight:6,reward:25,color:"bg-purple-500"},{id:2,weight:4,reward:20,color:"bg-pink-500"},{id:3,weight:8,reward:35,color:"bg-indigo-500"},{id:4,weight:3,reward:12,color:"bg-cyan-500"}],solution:[2,3],title:"Example 2"}];function R(){let[e,s]=(0,r.useState)(0),[t,l]=(0,r.useState)([]),[i,n]=(0,r.useState)({type:"none",message:""}),c=M[e],o=t.reduce((e,s)=>e+c.balls.find(e=>e.id===s).weight,0),d=t.reduce((e,s)=>e+c.balls.find(e=>e.id===s).reward,0),x=()=>{l([]),n({type:"none",message:""})},h=e=>{let s=t.includes(e)?t.filter(s=>s!==e):[...t,e];l(s);let a=s.reduce((e,s)=>e+c.balls.find(e=>e.id===s).weight,0),r=s.reduce((e,s)=>e+c.balls.find(e=>e.id===s).reward,0);if(a>c.capacity){n({type:"too_heavy",message:"Oops, the balls are too heavy! Try a different combination."});return}s.length===c.solution.length&&c.solution.every(e=>s.includes(e))?n({type:"success",message:"Nice! This is just right! You found the optimal solution."}):s.length>0&&r<c.solution.reduce((e,s)=>e+c.balls.find(e=>e.id===s).reward,0)?n({type:"suboptimal",message:"Oops, some other combination will give you more reward!"}):n({type:"none",message:""})};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold",children:c.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(N,{variant:"outline",size:"sm",onClick:()=>{e>0&&(s(e-1),x())},disabled:0===e,children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e+1," of ",M.length]}),(0,a.jsx)(N,{variant:"outline",size:"sm",onClick:()=>{e<M.length-1&&(s(e+1),x())},disabled:e===M.length-1,children:"Next"})]})]}),(0,a.jsxs)(v,{className:"border-2 border-gray-300",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 mr-2"}),"Capacity: ",c.capacity]}),(0,a.jsxs)(m,{variant:"secondary",children:["Weight: ",o,"/",c.capacity]})]})}),(0,a.jsxs)(C,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:c.balls.map(e=>(0,a.jsxs)(j.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(e.id),className:"\n                  relative cursor-pointer rounded-lg p-3 border-2 transition-all\n                  ".concat(t.includes(e.id)?"border-gray-800 shadow-lg ring-2 ring-blue-500":"border-gray-300 hover:border-gray-400","\n                "),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(e.color," mx-auto mb-2 flex items-center justify-center text-white font-bold text-xs"),children:e.id}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"font-bold text-sm",children:["W: ",e.weight]}),(0,a.jsxs)("div",{className:"text-yellow-600 font-bold text-sm",children:["R: ",e.reward]})]}),t.includes(e.id)&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(E.Z,{className:"w-3 h-3 text-white"})})]},e.id))}),(0,a.jsxs)("div",{className:"bg-gray-100 p-3 rounded-lg text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Selected:"}),(0,a.jsx)("span",{className:"text-gray-600",children:t.length>0?t.join(", "):"None"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Reward:"}),(0,a.jsxs)("span",{className:"text-yellow-600 font-bold",children:[d," points"]})]})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)(N,{variant:"outline",size:"sm",onClick:x,disabled:0===t.length,children:"Reset"})}),(0,a.jsx)(f.M,{mode:"wait",children:"none"!==i.type&&(0,a.jsx)(j.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 rounded-lg border-2 text-sm ".concat("success"===i.type?"bg-green-50 border-green-200 text-green-800":"too_heavy"===i.type?"bg-red-50 border-red-200 text-red-800":"bg-orange-50 border-orange-200 text-orange-800"),children:(0,a.jsxs)("div",{className:"flex items-center",children:["success"===i.type&&(0,a.jsx)(E.Z,{className:"h-4 w-4 mr-2 text-green-600"}),"too_heavy"===i.type&&(0,a.jsx)(I.Z,{className:"h-4 w-4 mr-2 text-red-600"}),"suboptimal"===i.type&&(0,a.jsx)(Z.Z,{className:"h-4 w-4 mr-2 text-orange-600"}),(0,a.jsx)("span",{className:"font-medium",children:i.message})]})})})]})]})]})}function Y(e){let{onNext:s}=e,[t,l]=(0,r.useState)(0),[i,n]=(0,r.useState)(!1),[c,o]=(0,r.useState)(0),d=[{title:"Welcome to the Knapsack Experiment",content:(0,a.jsx)("div",{className:"max-w-4xl mx-auto space-y-8",children:(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-8 rounded-xl border-2 border-blue-200",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,a.jsx)(P.Z,{className:"h-8 w-8 text-blue-600"}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"The Knapsack Problem"})]}),(0,a.jsx)("p",{className:"text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed",children:'You will be answering a series of questions, each presenting what\'s called a "knapsack problem." These are classic optimization puzzles where you need to make strategic choices to maximize your score.'})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-yellow-50 p-8 rounded-xl border-2 border-green-200",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,a.jsx)(z.Z,{className:"h-8 w-8 text-green-600"}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Monetary Rewards"})]}),(0,a.jsxs)("p",{className:"text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed",children:[(0,a.jsx)("strong",{children:"The more questions you answer correctly, the higher monetary reward you will receive."}),"Your performance directly impacts your compensation, so it pays to think carefully about each decision!"]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm max-w-lg mx-auto",children:(0,a.jsxs)("p",{className:"text-lg text-gray-600",children:["\uD83D\uDCDA ",(0,a.jsx)("strong",{children:"Don't worry!"})," We will have opportunities to practice before results count."]})})]})})]})})},{title:"How to do the Knapsack Problem",content:(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"In every question, you will see:"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(v,{className:"border-2 border-blue-200",children:[(0,a.jsx)(k,{className:"pb-3",children:(0,a.jsxs)(S,{className:"flex items-center text-base",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 mr-2 text-blue-600"}),"A Knapsack"]})}),(0,a.jsxs)(C,{className:"pt-0",children:[(0,a.jsxs)("p",{className:"text-gray-600 text-sm",children:["Has a ",(0,a.jsx)("strong",{children:"capacity (C)"})," - the maximum weight it can hold"]}),(0,a.jsx)("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg",children:(0,a.jsx)("span",{className:"text-xs font-medium",children:"Example: Capacity = 10"})})]})]}),(0,a.jsxs)(v,{className:"border-2 border-green-200",children:[(0,a.jsx)(k,{className:"pb-3",children:(0,a.jsxs)(S,{className:"flex items-center text-base",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 mr-2 text-green-600"}),"Colored Balls"]})}),(0,a.jsxs)(C,{className:"pt-0",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-2 text-sm",children:"Each ball has two properties:"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(F.Z,{className:"h-3 w-3 mr-2 text-gray-500"}),(0,a.jsxs)("span",{className:"text-xs",children:[(0,a.jsx)("strong",{children:"Weight (W):"})," How heavy it is"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A.Z,{className:"h-3 w-3 mr-2 text-yellow-500"}),(0,a.jsxs)("span",{className:"text-xs",children:[(0,a.jsx)("strong",{children:"Reward (R):"})," Points you earn"]})]})]})]})]})]})]})}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-xl border-2 border-gray-200",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Try it yourself!"}),(0,a.jsx)("p",{className:"text-center text-gray-700 mb-6",children:"Here's what a question will look like. Click on the balls to select them and see what happens:"}),(0,a.jsx)(R,{})]})]})},{title:"Your Goals and Scoring",content:(0,a.jsx)("div",{className:"max-w-4xl mx-auto space-y-8",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-8 rounded-xl border-2 border-yellow-200",children:[(0,a.jsx)("h3",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:"Maximize Your Reward Points!"}),(0,a.jsx)("p",{className:"text-xl text-gray-700 mb-8 text-center max-w-3xl mx-auto",children:"Select balls to collect the most reward points possible without exceeding the knapsack's capacity."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h4",{className:"font-semibold text-green-700 mb-4 text-xl",children:"✓ For Every Question"}),(0,a.jsxs)("ul",{className:"text-lg text-gray-600 space-y-3",children:[(0,a.jsx)("li",{children:"• Click once to select a ball, click on a selected ball again to deselect"}),(0,a.jsx)("li",{children:"• Find the combination of selected balls that maximizes the reward while keeping combined weights below capacity"}),(0,a.jsx)("li",{children:'• Once you think you have the right selection, click "confirm answer" to lock in your selection'})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-700 mb-4 text-xl",children:"\uD83C\uDFAF Scoring"}),(0,a.jsxs)("ul",{className:"text-lg text-gray-600 space-y-3",children:[(0,a.jsx)("li",{children:"• Answer is considered correct if and only if you find the most optimal selection of balls"}),(0,a.jsx)("li",{children:"• All-or-nothing scoring system"}),(0,a.jsx)("li",{children:"• Partial credit is not awarded"})]})]})]})]})})}];if(i){let e=Q[c];return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(S,{className:"flex items-center text-2xl",children:[(0,a.jsx)(D.Z,{className:"h-8 w-8 mr-3 text-blue-600"}),"Sample Question ",c+1," of ",Q.length]}),(0,a.jsx)(m,{variant:"outline",className:"text-lg px-4 py-2",children:"Tutorial"})]})}),(0,a.jsxs)(C,{className:"space-y-8 p-8",children:[(0,a.jsx)(O,{question:e,showSolution:!0,isInteractive:!1}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(N,{variant:"outline",onClick:()=>o(Math.max(0,c-1)),disabled:0===c,children:"Previous Example"}),(0,a.jsxs)(N,{onClick:()=>{c<Q.length-1?o(c+1):s()},children:[c===Q.length-1?"Start Practice":"Next Example",(0,a.jsx)(T.Z,{className:"ml-2 h-4 w-4"})]})]})]})]})})}return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(S,{className:"text-3xl font-bold",children:d[t].title}),(0,a.jsxs)(m,{variant:"outline",className:"text-lg px-4 py-2",children:["Step ",t+1," of ",d.length]})]})}),(0,a.jsxs)(C,{className:"p-8",children:[(0,a.jsx)(f.M,{mode:"wait",children:(0,a.jsx)(j.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:d[t].content},t)}),(0,a.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,a.jsx)(N,{variant:"outline",onClick:()=>l(Math.max(0,t-1)),disabled:0===t,children:"Previous"}),(0,a.jsxs)(N,{onClick:()=>{t<d.length-1?l(t+1):n(!0)},children:[t===d.length-1?"See Examples":"Next",(0,a.jsx)(T.Z,{className:"ml-2 h-4 w-4"})]})]})]})]})})}var W=t(1239),B=t(6865);let _=t(257).env.NEXT_PUBLIC_API_BASE||"https://knapsack-expirement.onrender.com";async function L(e){let s=await fetch("".concat(_,"/api/v1/questions/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw console.error("[generateQuestions] failed",e),Error(e.error||"Question generation failed")}return s.json()}async function G(e,s){let t=await fetch("".concat(_,"/api/v1/questions/").concat(e,"/").concat(s),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw console.error("[getQuestions] failed",e),Error(e.error||"Failed to retrieve questions")}return t.json()}async function U(e){try{let s=await G(e.participantId,e.phase);return console.log("[getOrGenerateQuestions] Found existing questions for ".concat(e.phase,":"),s.questionSet.questions.length),s.questionSet.questions}catch(t){console.log("[getOrGenerateQuestions] No existing questions found, generating new ones for ".concat(e.phase));let s=await L(e);return console.log("[getOrGenerateQuestions] Generated ".concat(s.questionsGenerated," questions")),(await G(e.participantId,e.phase)).questionSet.questions}}var H=t(257);function K(e){let{onNext:s,updateParticipantData:t}=e,[l,i]=(0,r.useState)(0),[n,c]=(0,r.useState)([]),[d,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)(null),[b,p]=(0,r.useState)(!0),[w,y]=(0,r.useState)(null),[T,q]=(0,r.useState)(!1),[P,Z]=(0,r.useState)([]),[z,A]=(0,r.useState)(!0),[F,D]=(0,r.useState)(null),[Q,M]=(0,r.useState)(null);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("participantId");M(e),e||console.warn("[Practice] No participantId in localStorage. Did registration run on page load?")}catch(e){console.error("[Practice] Failed to read participantId from localStorage",e)}},[]),(0,r.useEffect)(()=>{Q&&(async()=>{try{A(!0),D(null),console.log("[Practice] Loading dynamic questions for participant:",Q);let e=await U({participantId:Q,phase:"practice",count:6});console.log("[Practice] Loaded questions:",e),Z(e)}catch(e){console.error("[Practice] Failed to load questions:",e),D(e instanceof Error?e.message:"Failed to load questions"),Z([{id:1,capacity:10,balls:[{id:1,weight:6,reward:18,color:"bg-red-500"},{id:2,weight:4,reward:12,color:"bg-blue-500"},{id:3,weight:3,reward:9,color:"bg-green-500"}],solution:[1,2],explanation:"Select balls 1 and 2 for optimal reward while staying within capacity.",difficulty:"easy"}])}finally{A(!1)}})()},[Q]);let R=(0,r.useMemo)(()=>H.env.NEXT_PUBLIC_API_BASE||"http://localhost:8787",[]),Y=async()=>{if(Q)try{A(!0),y(!0),q(!0);let e=await U({participantId:Q,phase:"practice-extra",count:4}),s=[...P,...e];Z(s),i(P.length),y(null)}catch(e){console.error("[Practice] Failed to load extra questions:",e),y(null)}finally{A(!1)}},_=async()=>{if(!Q){alert("Participant not registered yet. Please refresh the page so we can register your session."),console.error("[Practice] handleComplete aborted: no participantId");return}let e=n.filter(e=>e.correct).length,a={phase:"practice",participantId:Q,data:{completed:!0,correctAnswers:e,totalQuestions:n.length,accuracy:n.length?e/n.length:0,answers:n}};console.log("[Practice] Submitting payload →",a);try{let e=await fetch("".concat(R,"/api/v1/ingest-phase"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await e.text(),l=null;try{l=JSON.parse(r)}catch(e){}if(console.log("[Practice] ingest-phase status:",e.status,"body:",r),!e.ok)throw Error((null==l?void 0:l.error)||"Failed to submit practice data (status ".concat(e.status,")"));t({training1:a.data}),s()}catch(e){console.error("[Practice] ingest-phase error:",e),alert("There was an error submitting your practice data. See console for details.")}};if(z)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,a.jsx)(v,{className:"shadow-lg",children:(0,a.jsx)(C,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mb-4",children:(0,a.jsx)(W.Z,{className:"h-8 w-8 text-white animate-pulse"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Generating Dynamic Questions"}),(0,a.jsx)("p",{className:"text-gray-600 max-w-md mx-auto",children:"Creating personalized knapsack problems using our sophisticated academic algorithm..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),(0,a.jsx)("span",{children:"This may take a few moments"})]}),F&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:["Error: ",F,(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-xs",children:"Falling back to backup questions..."})]})]})})})});if(b)return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[!Q&&(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-amber-700 bg-amber-50 border border-amber-200 rounded p-3",children:[(0,a.jsx)(B.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"No participant ID yet. Make sure the page registered a participant on load."})]}),(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 mr-2 text-green-600"}),"Practice Round - Instructions"]})}),(0,a.jsxs)(C,{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-green-800 mb-6",children:"Welcome to the Practice Section!"}),(0,a.jsxs)("div",{className:"space-y-6 text-green-700",children:[(0,a.jsxs)("p",{className:"text-lg",children:["In this section, you can practice with dynamically generated questions. You will see a total of",(0,a.jsxs)("strong",{children:[" ",P.length," questions"]})," to help you get familiar with the knapsack puzzle."]}),F&&(0,a.jsx)("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,a.jsx)("strong",{children:"Note:"})," We encountered an issue generating questions dynamically, so we're using backup questions for this session."]})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"\uD83E\uDDE0 Dynamic Generation"}),(0,a.jsxs)("ul",{className:"text-base space-y-2",children:[(0,a.jsx)("li",{children:"• Questions are generated using academic algorithms"}),(0,a.jsx)("li",{children:"• Difficulty controlled by dominance relationships"}),(0,a.jsx)("li",{children:"• Each question has a unique optimal solution"}),(0,a.jsx)("li",{children:"• No time constraint - take your time to learn!"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"\uD83C\uDFAF How to Play"}),(0,a.jsxs)("ul",{className:"text-base space-y-2",children:[(0,a.jsx)("li",{children:"• Click once to select a ball, click again to deselect"}),(0,a.jsx)("li",{children:"• Maximize reward while staying within capacity"}),(0,a.jsx)("li",{children:'• Click "confirm answer" to lock in your selection'}),(0,a.jsx)("li",{children:"• See solutions and explanations after each answer"})]})]})]})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(N,{onClick:()=>p(!1),size:"lg",className:"bg-green-600 hover:bg-green-700",children:"Start Practice Questions"})})]})]})]});if(null!==w){let e=n.filter(e=>e.correct).length,s=(n.length?e/n.length:0)*100;return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(E.Z,{className:"h-6 w-6 mr-2 text-green-600"}),"Practice Complete!"]})}),(0,a.jsx)(C,{className:"space-y-6",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-8 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Congratulations! You have completed the training."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:e}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:n.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[s.toFixed(0),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Accuracy"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border-2 border-blue-200 mb-6",children:[(0,a.jsx)("p",{className:"text-lg text-gray-800 mb-4",children:"You should now know how to complete knapsack problems effectively."}),(0,a.jsx)("p",{className:"text-base text-gray-700",children:"From this point on, you will be faced with different tests that are all on completing knapsack problems."})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Would you like more practice?"}),(0,a.jsx)("p",{className:"text-yellow-800 text-sm mb-4",children:'If you wish to see additional problems, you can press "More Practice" which will allow you to see more knapsack practice questions.'}),(0,a.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,a.jsx)(N,{onClick:_,size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:"Continue to Test 1"}),(0,a.jsx)(N,{onClick:Y,variant:"outline",size:"lg",children:"More Practice"})]})]})]})})})]})})}if(!P.length)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,a.jsx)(v,{className:"shadow-lg",children:(0,a.jsx)(C,{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"text-gray-500",children:"No questions available"})})})});let L=P[l],G=(l+1)/P.length*100;return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsx)(v,{children:(0,a.jsxs)(C,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Practice Question ",l+1," of ",P.length,T&&l>=6&&" (Extra Practice)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{variant:"outline",children:"No Time Limit"}),Q&&(0,a.jsxs)(m,{variant:"outline",children:["PID: ",Q.slice(0,8),"…"]})]})]}),(0,a.jsx)(o,{value:G,className:"h-2"})]})}),(0,a.jsx)(f.M,{mode:"wait",children:d?(0,a.jsxs)(j.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"space-y-6",children:[(0,a.jsx)(v,{className:"border-2 ".concat((null==h?void 0:h.correct)?"border-green-500 bg-green-50":"border-red-500 bg-red-50"),children:(0,a.jsx)(C,{className:"p-6 text-center",children:(null==h?void 0:h.correct)?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(E.Z,{className:"h-12 w-12 text-green-600 mx-auto"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-green-800",children:"Correct!"}),(0,a.jsx)("p",{className:"text-green-700",children:"You found the optimal solution. Great job!"})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(I.Z,{className:"h-12 w-12 text-red-600 mx-auto"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-red-800",children:"Not Quite Right"}),(0,a.jsx)("p",{className:"text-red-700",children:"Don't worry! Let's see the optimal solution below."})]})})}),(0,a.jsx)(O,{question:L,showSolution:!0,isInteractive:!1}),(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)(N,{onClick:()=>{x(!1),u(null),l<P.length-1?i(l+1):y(!1)},size:"lg",children:l===P.length-1?"Complete Practice":"Next Question"}),T&&l>=6&&(0,a.jsx)("div",{children:(0,a.jsx)(N,{onClick:_,variant:"outline",size:"lg",className:"ml-4",children:"End Extra Practice & Continue to Test 1"})})]})]},"feedback-".concat(l)):(0,a.jsx)(j.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:(0,a.jsx)(O,{question:L,onAnswer:(e,s)=>{let t={questionId:P[l].id,selected:e,correct:s};c(e=>[...e,t]),u({selected:e,correct:s}),x(!0)},isInteractive:!0})},"question-".concat(l))})]})}let J=[{id:1,capacity:10,balls:[{id:1,weight:6,reward:18,color:"bg-red-500"},{id:2,weight:4,reward:12,color:"bg-blue-500"},{id:3,weight:3,reward:9,color:"bg-green-500"}],solution:[1,2],difficulty:"easy"},{id:2,capacity:12,balls:[{id:1,weight:5,reward:15,color:"bg-purple-500"},{id:2,weight:7,reward:21,color:"bg-yellow-500"},{id:3,weight:4,reward:12,color:"bg-pink-500"},{id:4,weight:3,reward:9,color:"bg-indigo-500"}],solution:[2,3],difficulty:"easy"},{id:3,capacity:15,balls:[{id:1,weight:8,reward:24,color:"bg-red-500"},{id:2,weight:6,reward:18,color:"bg-blue-500"},{id:3,weight:5,reward:15,color:"bg-green-500"},{id:4,weight:4,reward:12,color:"bg-yellow-500"}],solution:[1,2],difficulty:"easy"},{id:4,capacity:18,balls:[{id:1,weight:9,reward:27,color:"bg-orange-500"},{id:2,weight:7,reward:21,color:"bg-teal-500"},{id:3,weight:6,reward:18,color:"bg-rose-500"},{id:4,weight:5,reward:15,color:"bg-cyan-500"},{id:5,weight:4,reward:12,color:"bg-lime-500"}],solution:[1,2],difficulty:"medium"},{id:5,capacity:20,balls:[{id:1,weight:10,reward:30,color:"bg-red-500"},{id:2,weight:8,reward:24,color:"bg-blue-500"},{id:3,weight:6,reward:18,color:"bg-green-500"},{id:4,weight:5,reward:15,color:"bg-yellow-500"},{id:5,weight:4,reward:12,color:"bg-purple-500"}],solution:[1,2],difficulty:"medium"},{id:6,capacity:22,balls:[{id:1,weight:12,reward:36,color:"bg-indigo-500"},{id:2,weight:10,reward:30,color:"bg-pink-500"},{id:3,weight:8,reward:24,color:"bg-orange-500"},{id:4,weight:6,reward:18,color:"bg-teal-500"},{id:5,weight:5,reward:15,color:"bg-rose-500"}],solution:[1,2],difficulty:"medium"},{id:7,capacity:25,balls:[{id:1,weight:15,reward:45,color:"bg-cyan-500"},{id:2,weight:12,reward:36,color:"bg-lime-500"},{id:3,weight:10,reward:30,color:"bg-amber-500"},{id:4,weight:8,reward:24,color:"bg-emerald-500"},{id:5,weight:6,reward:18,color:"bg-violet-500"}],solution:[1,4],difficulty:"medium"},{id:8,capacity:30,balls:[{id:1,weight:18,reward:54,color:"bg-red-500"},{id:2,weight:15,reward:45,color:"bg-blue-500"},{id:3,weight:12,reward:36,color:"bg-green-500"},{id:4,weight:10,reward:30,color:"bg-yellow-500"},{id:5,weight:8,reward:24,color:"bg-purple-500"},{id:6,weight:6,reward:18,color:"bg-pink-500"}],solution:[1,3],difficulty:"hard"},{id:9,capacity:35,balls:[{id:1,weight:20,reward:60,color:"bg-indigo-500"},{id:2,weight:18,reward:54,color:"bg-orange-500"},{id:3,weight:15,reward:45,color:"bg-teal-500"},{id:4,weight:12,reward:36,color:"bg-rose-500"},{id:5,weight:10,reward:30,color:"bg-cyan-500"},{id:6,weight:8,reward:24,color:"bg-lime-500"}],solution:[1,3],difficulty:"hard"},{id:10,capacity:40,balls:[{id:1,weight:25,reward:75,color:"bg-amber-500"},{id:2,weight:20,reward:60,color:"bg-emerald-500"},{id:3,weight:18,reward:54,color:"bg-violet-500"},{id:4,weight:15,reward:45,color:"bg-sky-500"},{id:5,weight:12,reward:36,color:"bg-stone-500"},{id:6,weight:10,reward:30,color:"bg-red-500"}],solution:[1,4],difficulty:"hard"}];function X(e){let{onNext:s,updateParticipantData:t}=e,[l,i]=(0,r.useState)(0),[n,c]=(0,r.useState)([]),[d,x]=(0,r.useState)(!0),[h,u]=(0,r.useState)(0),[g,w]=(0,r.useState)(900),[y,T]=(0,r.useState)(0),[q,P]=(0,r.useState)(!1),E=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(!d&&g>0&&!q){let e=setInterval(()=>{w(s=>s<=1?(clearInterval(e),Z(),0):s-1)},1e3);return()=>clearInterval(e)}},[d,g,q]);let I=()=>{l<J.length-1?(i(e=>e+1),T(Date.now())):z()},Z=()=>{if(E.current)return;let e=J.slice(l).map(e=>({questionId:e.id,selected:[],correct:!1,timeSpent:0}));c(s=>[...s,...e]),z()},z=async()=>{if(E.current)return;E.current=!0,P(!0);let e=n.filter(e=>e.correct).length,s={phase:"test1",participantId:localStorage.getItem("participantId"),data:{completed:!0,correctAnswers:e,totalQuestions:J.length,accuracy:e/J.length,timeUsed:900-g,answers:n}};try{if(!(await fetch("https://knapsack-expirement.onrender.com/api/v1/ingest-phase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw Error("Failed to submit test data");console.log("[Test 1] Submission successful ✅"),t({training2:s.data,totalScore:e})}catch(e){console.error("[Test 1] Submission failed ❌",e),alert("There was an error submitting your test results.")}},A=J[l],F=(l+1)/J.length*100,D={easy:"bg-green-500",medium:"bg-yellow-500",hard:"bg-red-500"}[A.difficulty];if(d)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(W.Z,{className:"h-6 w-6 mr-2 text-orange-600"}),"Test 1 - Instructions"]})}),(0,a.jsxs)(C,{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-orange-800 mb-6",children:"Test 1"}),(0,a.jsxs)("div",{className:"space-y-6 text-orange-700",children:[(0,a.jsxs)("p",{className:"text-lg",children:["In this section, you will complete ",(0,a.jsx)("strong",{children:"10 questions"})," in Test 1. Once you start, you will have exactly ",(0,a.jsx)("strong",{children:"15 minutes total"})," to complete all questions."]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"Rules"]}),(0,a.jsxs)("ul",{className:"text-base space-y-2",children:[(0,a.jsx)("li",{children:"• You have 15 minutes total for all 10 questions."}),(0,a.jsx)("li",{children:"• Timer counts down continuously."}),(0,a.jsx)("li",{children:"• You cannot come back to previous questions after seeing later questions, so answer questions you wish before moving on."}),(0,a.jsx)("li",{children:"• Guessing is penalized! Please only answer questions you wish to answer."}),(0,a.jsx)("li",{children:"• Only questions confirmed are considered answered, unconfirmed questions are considered unanswered!"}),(0,a.jsx)("li",{children:"• Auto-submit when time runs out."})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"Scoring"]}),(0,a.jsxs)("ul",{className:"text-base space-y-2",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Correct answers"}),": Contribute to your score"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Incorrect answers"}),": Do not contribute to your score"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Unanswered questions"}),": Considered neutral"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-red-100 border border-red-300 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(B.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,a.jsx)("h4",{className:"text-lg font-semibold text-red-800",children:"Important Reminders"})]}),(0,a.jsxs)("ul",{className:"text-base text-red-700 space-y-2",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"MUST confirm answers you wish to submit!"})," Unconfirmed = unanswered."]}),(0,a.jsx)("li",{children:"• You ARE expected to finish before the timing constraint."}),(0,a.jsx)("li",{children:"• If you attempted a question but do not wish to answer it, no need to deselect the balls, just leave the question unconfirmed."}),(0,a.jsx)("li",{children:"• Focus on accuracy over speed."})]})]})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(N,{onClick:()=>{x(!1),u(Date.now()),T(Date.now())},size:"lg",className:"bg-orange-600 hover:bg-orange-700",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"Start Test 1"]})})]})]})});if(q){let e=n.filter(e=>e.correct).length,t=n.filter(e=>0===e.selected.length).length,r=n.filter(e=>e.selected.length>0&&!e.correct).length;return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-6 w-6 mr-2 text-green-600"}),"Test 1 Complete!"]})}),(0,a.jsx)(C,{className:"space-y-6",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-8 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Your Performance Summary"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:e}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Correct"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:t}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Unanswered"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-red-600",children:r}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Incorrect"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border-2 border-blue-500",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:e}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Performance Score"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("p",{className:"text-blue-800 font-medium",children:["You achieved a performance score of ",(0,a.jsx)("strong",{children:e}),"!"]}),(0,a.jsx)("p",{className:"text-blue-700 text-sm mt-1",children:"Great job completing Test 1!"})]}),(0,a.jsx)(N,{onClick:s,size:"lg",children:"Continue to Benchmark Test"})]})})})]})})}return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsx)(v,{children:(0,a.jsxs)(C,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Question ",l+1," of ",J.length]}),(0,a.jsx)(m,{className:"text-white ".concat(D),children:A.difficulty.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-lg ".concat(g<=300?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-mono font-bold",children:"".concat(Math.floor(g/60),":").concat((g%60).toString().padStart(2,"0"))})]})]}),(0,a.jsx)(o,{value:F,className:"h-2"})]})}),(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-center",children:(0,a.jsx)("p",{className:"text-red-700 font-medium text-sm",children:"\uD83D\uDEA8 Confirm answers or they will be considered unanswered!"})}),(0,a.jsx)(f.M,{mode:"wait",children:(0,a.jsx)(j.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:(0,a.jsx)(O,{question:A,onAnswer:(e,s)=>{if(E.current)return;let t=Date.now()-y,a={questionId:J[l].id,selected:e,correct:s,timeSpent:Math.round(t/1e3)};c(e=>[...e,a]),I()},onSkip:()=>{if(E.current)return;let e=Date.now()-y,s={questionId:J[l].id,selected:[],correct:!1,timeSpent:Math.round(e/1e3)};c(e=>[...e,s]),I()},isInteractive:!0,isTestMode:!0,timeLimit:90,onTimeUp:()=>{let e=Date.now()-y,s={questionId:A.id,selected:[],correct:!1,timeSpent:Math.round(e/1e3)};c(e=>[...e,s]),I()}})},"question-".concat(l))})]})}var $=t(6215),V=t(6595),ee=t(2451),es=t(407);function et(e){let{onNext:s,updateParticipantData:t}=e,[l,i]=(0,r.useState)([]),[n,c]=(0,r.useState)(0),[d,x]=(0,r.useState)({}),[h,u]=(0,r.useState)(new Set),[g,p]=(0,r.useState)(!0),[j,f]=(0,r.useState)(1200),[w,y]=(0,r.useState)(!1),[T,q]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!0),[I,Z]=(0,r.useState)(null),[z,A]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("participantId");A(e),e||console.warn("[Benchmark] No participantId in localStorage")},[]),(0,r.useEffect)(()=>{z&&(async()=>{try{E(!0),Z(null),console.log("[Benchmark] Loading dynamic questions for participant:",z);let e=await U({participantId:z,phase:"benchmark",count:15});console.log("[Benchmark] Loaded questions:",e),i(e)}catch(e){console.error("[Benchmark] Failed to load questions:",e),Z(e instanceof Error?e.message:"Failed to load questions"),i([{id:1,capacity:15,balls:[{id:1,weight:8,reward:24,color:"bg-red-500"},{id:2,weight:6,reward:18,color:"bg-blue-500"},{id:3,weight:4,reward:12,color:"bg-green-500"},{id:4,weight:3,reward:9,color:"bg-yellow-500"}],solution:[1,2],explanation:"Select balls 1 and 2 for optimal reward within capacity.",difficulty:"medium"}])}finally{E(!1)}})()},[z]),(0,r.useEffect)(()=>{if(!g&&j>0&&!w){let e=setInterval(()=>{f(e=>e<=1?(F(),0):e-1)},1e3);return()=>clearInterval(e)}},[g,j,w]);let F=()=>{D()},D=async()=>{y(!0);let e=Object.values(d).filter(e=>e.confirmed&&e.correct).length;Object.values(d).filter(e=>e.confirmed).length,l.length;let a={phase:"benchmark",participantId:z,data:{completed:!0,correctAnswers:e,totalQuestions:l.length,accuracy:e/l.length,timeUsed:1200-j,answers:Object.entries(d).map(e=>{let[s,t]=e;return{questionId:Number(s),selected:t.selected,correct:t.correct,confirmed:t.confirmed}})}};try{if(!(await fetch("http://localhost:8787/api/v1/ingest-phase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to submit benchmark test data");console.log("[Benchmark Test] Submission successful ✅"),t({benchmark:a.data,totalScore:e}),s()}catch(e){console.error("[Benchmark Test] Submission failed ❌",e),alert("There was an error submitting your benchmark test results.")}},Q=e=>{u(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})},M=e=>{c(e)};if(P)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,a.jsx)(v,{className:"shadow-lg",children:(0,a.jsx)(C,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-600 rounded-2xl mb-4",children:(0,a.jsx)(W.Z,{className:"h-8 w-8 text-white animate-pulse"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Generating Benchmark Questions"}),(0,a.jsx)("p",{className:"text-gray-600 max-w-md mx-auto",children:"Creating a sophisticated test with mixed difficulty levels using academic algorithms..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-500"}),(0,a.jsx)("span",{children:"Generating 15 questions with controlled difficulty progression"})]}),I&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:["Error: ",I,(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-xs",children:"Falling back to backup questions..."})]})]})})})});if(g)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)($.Z,{className:"h-6 w-6 mr-2 text-purple-600"}),"Benchmark Test - Instructions"]})}),(0,a.jsxs)(C,{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-purple-800 mb-6",children:"Benchmark Assessment"}),(0,a.jsxs)("div",{className:"space-y-6 text-purple-700",children:[(0,a.jsxs)("p",{className:"text-lg",children:["You will complete a test with ",(0,a.jsxs)("strong",{children:[l.length," dynamically generated knapsack questions"]}),". You have exactly ",(0,a.jsx)("strong",{children:"20 minutes"})," to complete the test."]}),I&&(0,a.jsx)("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-4 mb-4",children:(0,a.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,a.jsx)("strong",{children:"Note:"})," We encountered an issue generating questions dynamically, so we're using backup questions for this session."]})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"\uD83E\uDDED Navigation"}),(0,a.jsxs)("ul",{className:"text-base space-y-2",children:[(0,a.jsx)("li",{children:"• You can navigate to any question in the test at any point by clicking the question menu on the left, or by clicking the arrow buttons on every question."}),(0,a.jsx)("li",{children:'• You can "highlight" questions by clicking the star icon on the menu.'}),(0,a.jsx)("li",{children:"• As before, please remember to confirm questions you wish to answer. You cannot change your answer after confirming, but you can still view them by moving to the question."})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"\uD83C\uDFAF Assessment"}),(0,a.jsxs)("ul",{className:"text-base space-y-2",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Correct answers"}),": Contribute to your performance assessment"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Incorrect answers"}),": Do not contribute to your assessment"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Unanswered questions"}),": Considered neutral"]}),(0,a.jsx)("li",{children:"• Must confirm answers to count"})]})]})]}),(0,a.jsx)("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-6",children:(0,a.jsxs)("p",{className:"text-lg text-yellow-800 font-medium",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Strategy Tip:"})," The test is long, and you are NOT expected to finish every question. Plan your time accordingly and focus on questions you can solve accurately."]})})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(N,{onClick:()=>p(!1),size:"lg",className:"bg-purple-600 hover:bg-purple-700",disabled:0===l.length,children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"Start Benchmark Test (",l.length," Questions)"]})})]})]})});if(w)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsx)(S,{className:"text-center",children:"Benchmark Test Complete!"})}),(0,a.jsx)(C,{className:"text-center space-y-6",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-8 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Great job completing the benchmark test!"}),(0,a.jsx)("p",{className:"text-gray-700 mb-6",children:"Your performance has been recorded and will contribute to your final results."}),(0,a.jsx)(N,{onClick:D,size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:"Continue to Final Test"})]})})]})});if(!l.length)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,a.jsx)(v,{className:"shadow-lg",children:(0,a.jsx)(C,{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"text-gray-500",children:"No questions available"})})})});let R=l[n],Y=d[R.id],B=Object.keys(d).filter(e=>d[Number.parseInt(e)].confirmed).length/l.length*100;return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Benchmark Test"}),(0,a.jsx)("div",{className:"px-3 py-2 rounded-lg text-lg font-mono font-bold ".concat(j<=300?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:"".concat(Math.floor(j/60),":").concat((j%60).toString().padStart(2,"0"))})]}),(0,a.jsx)(N,{onClick:()=>q(!0),variant:"outline",className:"bg-red-50 hover:bg-red-100 border-red-200",children:"Finish Test Early"})]}),(0,a.jsxs)(v,{className:"mb-6",children:[(0,a.jsx)(k,{className:"pb-4",children:(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Question Navigation"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[Object.keys(d).filter(e=>d[Number.parseInt(e)].confirmed).length," / ",l.length," completed"]}),(0,a.jsx)(o,{value:B,className:"h-2 w-32"})]})]})})}),(0,a.jsxs)(C,{className:"p-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"flex space-x-3 overflow-x-auto pb-3 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:l.map((e,s)=>{var t;let r=s===n,l=null===(t=d[e.id])||void 0===t?void 0:t.confirmed,i=h.has(s);return(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>M(s),className:"\n                        relative w-14 h-14 flex items-center justify-center font-bold text-lg rounded-xl transition-all duration-200 border-2\n                        ".concat(r?"bg-blue-500 text-white shadow-lg scale-110 border-blue-600":l?"bg-green-100 text-green-800 hover:bg-green-200 border-green-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 border-gray-300","\n                      "),children:s+1}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),Q(s)},className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center ".concat(i?"bg-yellow-500 text-white":"bg-gray-200 text-gray-400 hover:bg-gray-300"),children:(0,a.jsx)(V.Z,{className:"h-3 w-3",fill:i?"currentColor":"none"})})]},e.id)})})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-6 text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Legend:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded border-2 border-blue-600"}),(0,a.jsx)("span",{children:"Current"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-green-100 border-2 border-green-300 rounded"}),(0,a.jsx)("span",{children:"Completed"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-100 border-2 border-gray-300 rounded"}),(0,a.jsx)("span",{children:"Not answered"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(V.Z,{className:"w-2 h-2 text-white fill-current"})}),(0,a.jsx)("span",{children:"Starred"})]})]})})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(v,{children:[(0,a.jsx)(k,{className:"pb-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold",children:["Question ",n+1," of ",l.length]}),(null==Y?void 0:Y.confirmed)&&(0,a.jsx)(m,{variant:"secondary",className:"bg-green-100 text-green-800",children:"✓ Confirmed"})]})})}),(0,a.jsxs)(C,{children:[!(null==Y?void 0:Y.confirmed)&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-yellow-800 font-medium",children:"⚠️ Remember to confirm your answer if you wish to submit it! Unconfirmed answers are considered unanswered."})}),(0,a.jsx)(O,{question:R,onAnswer:(e,s)=>{let t=l[n].id;x(a=>({...a,[t]:{selected:e,confirmed:!0,correct:s}}))},isInteractive:!(null==Y?void 0:Y.confirmed),isTestMode:!0,initialSelection:(null==Y?void 0:Y.selected)||[],isConfirmed:(null==Y?void 0:Y.confirmed)||!1}),(null==Y?void 0:Y.confirmed)&&(0,a.jsx)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-green-800 font-medium",children:"✓ Answer confirmed. You can still view this question but cannot change your answer."})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 pt-6 border-t",children:[(0,a.jsxs)(N,{variant:"outline",size:"lg",onClick:()=>M(Math.max(0,n-1)),disabled:0===n,className:"flex items-center space-x-2",children:[(0,a.jsx)(ee.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Previous"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:["Question ",n+1," of ",l.length]}),(0,a.jsxs)(N,{variant:"outline",size:"lg",onClick:()=>M(Math.min(l.length-1,n+1)),disabled:n===l.length-1,className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(es.Z,{className:"h-5 w-5"})]})]})]})]})}),T&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(v,{className:"max-w-md mx-4",children:[(0,a.jsx)(k,{children:(0,a.jsx)(S,{className:"text-center text-red-600",children:"Finish Test Early?"})}),(0,a.jsxs)(C,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"There is still time remaining!"})," Please confirm that you would like to end the test early."]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Please remember to confirm all questions you wish to answer!"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(N,{variant:"outline",onClick:()=>q(!1),className:"flex-1",children:"Continue Test"}),(0,a.jsx)(N,{onClick:()=>{q(!1),D()},className:"flex-1 bg-red-600 hover:bg-red-700",children:"End Early"})]})]})]})})]})}let ea=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:c("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});ea.displayName="Textarea";var er=t(3417);let el=[{id:1,question:"How did you approach solving the knapsack problems? Describe your general strategy.",placeholder:"Describe your problem-solving approach, any patterns you noticed, or strategies you developed..."},{id:2,question:"What factors did you consider when deciding which items to include in the knapsack?",placeholder:"Consider weight, value, ratios, combinations, time constraints, etc..."},{id:3,question:"How did you manage your time during the test? Did you change your approach as time ran out?",placeholder:"Describe your time management strategy, how you prioritized questions, etc..."},{id:4,question:"What was the most challenging aspect of the knapsack problems for you?",placeholder:"Consider computational complexity, time pressure, decision-making, etc..."},{id:5,question:"How confident are you in your performance? What do you think your score might be?",placeholder:"Reflect on your confidence level and estimate your performance..."}];function ei(e){let{onNext:s,updateParticipantData:t,benchmarkData:l}=e,[i,n]=(0,r.useState)(0),[c,o]=(0,r.useState)({}),[d,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)(!1),u=(e,s)=>{o(t=>({...t,[e]:s}))},b=async()=>{let e={phase:"strategy",participantId:localStorage.getItem("participantId"),data:{completed:!0,answers:c,questionsAnswered:Object.keys(c).length,totalQuestions:el.length}};try{if(!(await fetch("http://localhost:8787/api/v1/ingest-phase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to submit strategy phase");console.log("[Strategy Phase] Submission successful ✅"),t({strategy:e.data}),s()}catch(e){console.error("[Strategy Phase] Submission failed ❌",e),alert("There was an error submitting your strategy responses.")}},p=e=>e.trim().split(/\s+/).filter(e=>e.length>0).length;if(d)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(er.Z,{className:"h-6 w-6 mr-2 text-blue-600"}),"Strategy Questions"]})}),(0,a.jsx)(C,{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-8 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Before revealing your final score..."}),(0,a.jsxs)("div",{className:"text-left space-y-4 text-gray-700 mb-6",children:[(0,a.jsx)("p",{className:"text-lg",children:"Before revealing your final score, we ask you to complete in words, as best as you can, a list of questions around your self-evaluation and your thought process during the test."}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-yellow-800 font-medium",children:[(0,a.jsx)("strong",{children:"Prize Opportunity:"})," For every text response you give, we will evaluate (by both humans and an AI) how insightful your solutions are. We will randomly pick 3 fellow test takers in the top quarter of insightfulness of answers for an additional prize of $25."]})}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Writing Guidelines:"}),(0,a.jsxs)("ul",{className:"text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Confine your responses to 150-200 words per question"}),(0,a.jsx)("li",{children:"• Shorter answers are perfectly acceptable - no penalty for brevity"}),(0,a.jsx)("li",{children:"• Focus on being insightful about your thought process"}),(0,a.jsx)("li",{children:"• Be honest about your strategies and challenges"})]})]})]}),(0,a.jsx)(N,{onClick:()=>x(!1),size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:"Begin Strategy Questions"})]})})]})});if(m){let e=Object.keys(c).length,s=Object.values(c).reduce((e,s)=>e+p(s),0);return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(E.Z,{className:"h-6 w-6 mr-2 text-green-600"}),"Strategy Questions Complete"]})}),(0,a.jsx)(C,{className:"space-y-6",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-8 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Thank you for your insights!"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:e}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Questions Answered"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:s}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Words"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:Math.round(s/Math.max(e,1))}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Words/Question"})]})]}),(0,a.jsx)("div",{className:"bg-green-100 border border-green-300 rounded-lg p-4 mb-6",children:(0,a.jsx)("p",{className:"text-green-800 font-medium",children:"Your responses have been recorded and will be evaluated for insightfulness. Remember, the top 25% most insightful responses will be eligible for the additional $25 prize!"})}),(0,a.jsx)(N,{onClick:b,size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:"Continue to Final Test"})]})})})]})})}let f=el[i],w=c[f.id]||"",y=p(w),T=(i+1)/el.length*100;return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Question ",i+1," of ",el.length]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[y," words"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)(j.E.div,{className:"bg-blue-600 h-2 rounded-full",initial:{width:0},animate:{width:"".concat(T,"%")},transition:{duration:.3}})})]}),(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 mr-2 text-blue-600"}),"Strategy Question ",i+1]})}),(0,a.jsxs)(C,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:f.question}),(0,a.jsx)(ea,{value:w,onChange:e=>u(f.id,e.target.value),placeholder:f.placeholder,className:"min-h-[200px] text-base"}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,a.jsxs)("span",{className:"text-sm ".concat(y>200?"text-red-600":y>150?"text-yellow-600":"text-gray-500"),children:[y," words ",y>200&&"(over 200 word limit)"]}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"Target: 150-200 words"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(N,{variant:"outline",onClick:()=>{i>0&&n(i-1)},disabled:0===i,children:"Previous"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Question ",i+1," of ",el.length]}),(0,a.jsx)(N,{onClick:()=>{i<el.length-1?n(i+1):h(!0)},className:"bg-blue-600 hover:bg-blue-700",children:i===el.length-1?"Finish":"Next"})]})]})]})]})}function en(e){let{onNext:s,updateParticipantData:t}=e,[l,i]=(0,r.useState)([]),[n,c]=(0,r.useState)(0),[d,x]=(0,r.useState)({}),[h,u]=(0,r.useState)(new Set),[p,j]=(0,r.useState)(!0),[f,w]=(0,r.useState)(1200),[y,T]=(0,r.useState)(!1),[q,P]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!0),[Z,z]=(0,r.useState)(null),[A,F]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("participantId");F(e),e||console.warn("[Final Test] No participantId in localStorage")},[]),(0,r.useEffect)(()=>{A&&(async()=>{try{I(!0),z(null),console.log("[Final Test] Loading dynamic questions for participant:",A);let e=await U({participantId:A,phase:"final",count:15});console.log("[Final Test] Loaded questions:",e),i(e)}catch(e){console.error("[Final Test] Failed to load questions:",e),z(e instanceof Error?e.message:"Failed to load questions"),i([{id:1,capacity:20,balls:[{id:1,weight:12,reward:36,color:"bg-red-500"},{id:2,weight:8,reward:24,color:"bg-blue-500"},{id:3,weight:6,reward:18,color:"bg-green-500"},{id:4,weight:4,reward:12,color:"bg-yellow-500"},{id:5,weight:3,reward:9,color:"bg-purple-500"}],solution:[1,2],explanation:"Select balls 1 and 2 for optimal reward within capacity.",difficulty:"medium"}])}finally{I(!1)}})()},[A]),(0,r.useEffect)(()=>{if(!p&&f>0&&!y){let e=setInterval(()=>{w(e=>e<=1?(D(),0):e-1)},1e3);return()=>clearInterval(e)}},[p,f,y]);let D=()=>{Q()},Q=async()=>{T(!0);let e=Object.values(d).filter(e=>e.confirmed&&e.correct).length;Object.values(d).filter(e=>e.confirmed).length,l.length;let a={participantId:A,phase:"final",data:{completed:!0,correctAnswers:e,totalQuestions:l.length,performanceScore:e,timeUsed:1200-f,answers:Object.entries(d).map(e=>{let[s,t]=e;return{questionId:Number(s),selected:t.selected,confirmed:t.confirmed,correct:t.correct}})}};try{if(!(await fetch("http://localhost:8787/api/v1/ingest-phase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to submit final test");console.log("[Final Test] Submission successful ✅"),t({final:a.data}),s()}catch(e){console.error("[Final Test] Submission failed ❌",e),alert("There was an error submitting your final test responses.")}},M=e=>{u(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})},R=e=>{c(e)};if(E)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,a.jsx)(v,{className:"shadow-lg",children:(0,a.jsx)(C,{className:"p-8 text-center",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-red-500 to-orange-600 rounded-2xl mb-4",children:(0,a.jsx)(W.Z,{className:"h-8 w-8 text-white animate-pulse"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Generating Final Test Questions"}),(0,a.jsx)("p",{className:"text-gray-600 max-w-md mx-auto",children:"Creating your final assessment with descending difficulty progression using our most sophisticated algorithms..."}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500"}),(0,a.jsx)("span",{children:"Generating 15 questions with academic rigor"})]}),Z&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:["Error: ",Z,(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-xs",children:"Falling back to backup questions..."})]})]})})})});if(p)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 mr-2 text-red-600"}),"Final Test - Instructions"]})}),(0,a.jsxs)(C,{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold text-red-800 mb-6",children:"Final Test"}),(0,a.jsxs)("div",{className:"space-y-6 text-red-700",children:[(0,a.jsxs)("p",{className:"text-lg",children:["Welcome to the final test! You will see ",(0,a.jsxs)("strong",{children:[l.length," dynamically generated knapsack questions"]})," with descending difficulty order. As usual, we do NOT expect you to finish every question in the time given, so plan your time accordingly."]}),Z&&(0,a.jsx)("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-4 mb-4",children:(0,a.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,a.jsx)("strong",{children:"Note:"})," We encountered an issue generating questions dynamically, so we're using backup questions for this session."]})}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border-2 border-red-200",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold mb-4 flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5 mr-2"}),"Assessment"]}),(0,a.jsxs)("ul",{className:"text-base space-y-2",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Correct answers"}),": Contribute to your performance assessment"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Incorrect answers"}),": Do not contribute to your assessment"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"Unanswered questions"}),": Considered neutral"]}),(0,a.jsx)("li",{children:"• Must confirm answers to count"})]})]}),(0,a.jsx)("div",{className:"bg-yellow-100 border border-yellow-300 rounded-lg p-6",children:(0,a.jsxs)("p",{className:"text-lg text-yellow-800 font-medium",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Strategy Note:"})," The test is long, and you are NOT expected to finish every question. Plan your time accordingly and focus on questions you can solve accurately."]})})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(N,{onClick:()=>{j(!1)},size:"lg",className:"bg-red-600 hover:bg-red-700",disabled:0===l.length,children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 mr-2"}),"Start Final Test (",l.length," Questions)"]})})]})]})});if(y){let e=Object.values(d).filter(e=>e.confirmed&&e.correct).length,t=Object.values(d).filter(e=>e.confirmed).length,r=l.length-t,i=Object.values(d).filter(e=>e.confirmed&&!e.correct).length;return(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(v,{className:"shadow-lg",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 mr-2 text-green-600"}),"Final Test Complete!"]})}),(0,a.jsx)(C,{className:"space-y-6",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-8 rounded-xl",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Your Final Performance"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-emerald-600",children:e}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Correct"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-amber-600",children:r}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Unanswered"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-rose-600",children:i}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Incorrect"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border-2 border-teal-500",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-teal-600",children:e}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Performance Score"})]})]}),(0,a.jsxs)("div",{className:"bg-teal-100 border border-teal-300 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("p",{className:"text-teal-800 font-medium",children:["You completed the test with a performance score of ",(0,a.jsx)("strong",{children:e}),"!"]}),(0,a.jsx)("p",{className:"text-teal-700 text-sm mt-1",children:"Thank you for participating in this study."})]}),(0,a.jsx)(N,{onClick:s,size:"lg",children:"Continue to Question Analysis"})]})})})]})})}if(!l.length)return(0,a.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:(0,a.jsx)(v,{className:"shadow-lg",children:(0,a.jsx)(C,{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"text-gray-500",children:"No questions available"})})})});let Y=l[n],B=d[Y.id],_=Object.keys(d).filter(e=>d[Number.parseInt(e)].confirmed).length/l.length*100;return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Final Test"}),(0,a.jsx)("div",{className:"px-3 py-2 rounded-lg text-lg font-mono font-bold ".concat(f<=300?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:"".concat(Math.floor(f/60),":").concat((f%60).toString().padStart(2,"0"))})]}),(0,a.jsx)(N,{onClick:()=>P(!0),variant:"outline",className:"bg-red-50 hover:bg-red-100 border-red-200",children:"Finish Test Early"})]}),(0,a.jsxs)(v,{className:"mb-6",children:[(0,a.jsx)(k,{className:"pb-4",children:(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"Question Navigation"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[Object.keys(d).filter(e=>d[Number.parseInt(e)].confirmed).length," / ",l.length," completed"]}),(0,a.jsx)(o,{value:_,className:"h-2 w-32"})]})]})})}),(0,a.jsxs)(C,{className:"p-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"flex space-x-3 overflow-x-auto pb-3 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100",children:l.map((e,s)=>{var t;let r=s===n,l=null===(t=d[e.id])||void 0===t?void 0:t.confirmed,i=h.has(s);return(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsx)("button",{onClick:()=>R(s),className:"\n                        relative w-14 h-14 flex items-center justify-center font-bold text-lg rounded-xl transition-all duration-200 border-2\n                        ".concat(r?"bg-blue-500 text-white shadow-lg scale-110 border-blue-600":l?"bg-green-100 text-green-800 hover:bg-green-200 border-green-300":"bg-gray-100 text-gray-600 hover:bg-gray-200 border-gray-300","\n                      "),children:s+1}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),M(s)},className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center ".concat(i?"bg-yellow-500 text-white":"bg-gray-200 text-gray-400 hover:bg-gray-300"),children:(0,a.jsx)(V.Z,{className:"h-3 w-3",fill:i?"currentColor":"none"})})]},e.id)})})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-6 text-sm",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Legend:"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded border-2 border-blue-600"}),(0,a.jsx)("span",{children:"Current"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-green-100 border-2 border-green-300 rounded"}),(0,a.jsx)("span",{children:"Completed"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-gray-100 border-2 border-gray-300 rounded"}),(0,a.jsx)("span",{children:"Not answered"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(V.Z,{className:"w-2 h-2 text-white fill-current"})}),(0,a.jsx)("span",{children:"Starred"})]})]})})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(v,{children:[(0,a.jsx)(k,{className:"pb-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold",children:["Question ",n+1," of ",l.length]}),(null==B?void 0:B.confirmed)&&(0,a.jsx)(m,{variant:"secondary",className:"bg-green-100 text-green-800",children:"✓ Confirmed"})]})})}),(0,a.jsxs)(C,{children:[!(null==B?void 0:B.confirmed)&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-yellow-800 font-medium",children:"⚠️ Remember to confirm your answer if you wish to submit it! Unconfirmed answers are considered unanswered."})}),(0,a.jsx)(O,{question:Y,onAnswer:(e,s)=>{let t=l[n].id;x(a=>({...a,[t]:{selected:e,confirmed:!0,correct:s}}))},isInteractive:!(null==B?void 0:B.confirmed),isTestMode:!0,initialSelection:(null==B?void 0:B.selected)||[],isConfirmed:(null==B?void 0:B.confirmed)||!1}),(null==B?void 0:B.confirmed)&&(0,a.jsx)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-green-800 font-medium",children:"✓ Answer confirmed. You can still view this question but cannot change your answer."})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 pt-6 border-t",children:[(0,a.jsxs)(N,{variant:"outline",size:"lg",onClick:()=>R(Math.max(0,n-1)),disabled:0===n,className:"flex items-center space-x-2",children:[(0,a.jsx)(ee.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Previous"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:["Question ",n+1," of ",l.length]}),(0,a.jsxs)(N,{variant:"outline",size:"lg",onClick:()=>R(Math.min(l.length-1,n+1)),disabled:n===l.length-1,className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(es.Z,{className:"h-5 w-5"})]})]})]})]})}),q&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)(v,{className:"max-w-md mx-4",children:[(0,a.jsx)(k,{children:(0,a.jsx)(S,{className:"text-center text-red-600",children:"Finish Test Early?"})}),(0,a.jsxs)(C,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("strong",{children:"There is still time remaining!"})," Please confirm that you would like to end the test early."]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Please remember to confirm all questions you wish to answer!"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(N,{variant:"outline",onClick:()=>P(!1),className:"flex-1",children:"Continue Test"}),(0,a.jsx)(N,{onClick:()=>{P(!1),Q()},className:"flex-1 bg-red-600 hover:bg-red-700",children:"End Early"})]})]})]})})]})}var ec=t(2023);function eo(e){let{participantData:s}=e,t=s.training1||{correctAnswers:0,totalQuestions:6,accuracy:0},r=s.training2||{correctAnswers:0,totalQuestions:10,totalPoints:0},l=s.benchmark||{correctAnswers:0,totalQuestions:30,totalPoints:0},i=s.prediction||{correctAnswers:0,totalQuestions:30,totalPoints:0},n=s.totalPoints||0;return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,a.jsx)(v,{className:"text-center shadow-lg bg-gradient-to-br from-purple-50 to-blue-50",children:(0,a.jsxs)(k,{children:[(0,a.jsx)("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-600 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(p.Z,{className:"h-10 w-10 text-white"})}),(0,a.jsx)(S,{className:"text-3xl font-bold text-gray-900",children:"Experiment Complete!"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mt-2",children:"Thank you for participating in the Knapsack Challenge"})]})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(v,{className:"border-2 border-green-200",children:[(0,a.jsx)(k,{className:"pb-3",children:(0,a.jsxs)(S,{className:"flex items-center text-lg",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Practice Round"]})}),(0,a.jsx)(C,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Correct Answers:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[t.correctAnswers,"/",t.totalQuestions]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Accuracy:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[(100*t.accuracy).toFixed(0),"%"]})]}),(0,a.jsx)(o,{value:100*t.accuracy,className:"h-2"})]})})]}),(0,a.jsxs)(v,{className:"border-2 border-orange-200",children:[(0,a.jsx)(k,{className:"pb-3",children:(0,a.jsxs)(S,{className:"flex items-center text-lg",children:[(0,a.jsx)($.Z,{className:"h-5 w-5 mr-2 text-orange-600"}),"Skills Assessment"]})}),(0,a.jsx)(C,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Correct Answers:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[r.correctAnswers,"/",r.totalQuestions]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Points Earned:"}),(0,a.jsx)("span",{className:"font-semibold text-orange-600",children:r.totalPoints})]}),(0,a.jsx)(o,{value:r.correctAnswers/r.totalQuestions*100,className:"h-2"})]})})]}),(0,a.jsxs)(v,{className:"border-2 border-purple-200",children:[(0,a.jsx)(k,{className:"pb-3",children:(0,a.jsxs)(S,{className:"flex items-center text-lg",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 mr-2 text-purple-600"}),"Benchmark Test"]})}),(0,a.jsx)(C,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Correct Answers:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[l.correctAnswers,"/",l.totalQuestions]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Points Earned:"}),(0,a.jsx)("span",{className:"font-semibold text-purple-600",children:l.totalPoints})]}),(0,a.jsx)(o,{value:l.correctAnswers/l.totalQuestions*100,className:"h-2"})]})})]}),(0,a.jsxs)(v,{className:"border-2 border-red-200",children:[(0,a.jsx)(k,{className:"pb-3",children:(0,a.jsxs)(S,{className:"flex items-center text-lg",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 mr-2 text-red-600"}),"Final Test"]})}),(0,a.jsx)(C,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Correct Answers:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[i.correctAnswers,"/",i.totalQuestions]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Points Earned:"}),(0,a.jsx)("span",{className:"font-semibold text-red-600",children:i.totalPoints})]}),(0,a.jsx)(o,{value:i.correctAnswers/i.totalQuestions*100,className:"h-2"})]})})]}),(0,a.jsxs)(v,{className:"border-2 border-blue-200 bg-blue-50 md:col-span-2",children:[(0,a.jsx)(k,{className:"pb-3",children:(0,a.jsxs)(S,{className:"flex items-center text-lg",children:[(0,a.jsx)(V.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Overall Performance"]})}),(0,a.jsx)(C,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Points:"}),(0,a.jsx)("span",{className:"font-bold text-2xl text-blue-600",children:n})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(m,{className:"bg-blue-600 text-white",children:"Excellent Performance!"})})]})})]})]}),(0,a.jsxs)(v,{className:"shadow-lg bg-gradient-to-br from-green-50 to-blue-50",children:[(0,a.jsx)(k,{children:(0,a.jsxs)(S,{className:"flex items-center justify-center text-2xl",children:[(0,a.jsx)(ec.Z,{className:"h-8 w-8 mr-3 text-green-600"}),"Study Complete"]})}),(0,a.jsx)(C,{className:"text-center space-y-6",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border-2 border-green-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-green-800",children:"Thank you for your valuable contribution to our research!"}),(0,a.jsx)("p",{className:"text-green-700",children:"Your participation helps us understand how people approach complex problem-solving tasks. All data collected will be used to advance research in cognitive science and algorithm design."})]})})]}),(0,a.jsxs)(v,{className:"bg-gray-50",children:[(0,a.jsx)(k,{children:(0,a.jsx)(S,{className:"text-xl",children:"About This Study"})}),(0,a.jsxs)(C,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-700",children:"This experiment investigated how people approach optimization problems under different conditions. The knapsack problem is a classic algorithmic challenge used in computer science and operations research."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"What we studied:"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsx)("li",{children:"• Problem-solving strategies under time pressure"}),(0,a.jsx)("li",{children:"• How question ordering affects performance"}),(0,a.jsx)("li",{children:"• Strategic decision-making in optimization tasks"}),(0,a.jsx)("li",{children:"• Cognitive approaches to complex problems"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Your contribution:"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsx)("li",{children:"• Provided valuable data on human problem-solving"}),(0,a.jsx)("li",{children:"• Helped understand cognitive strategies"}),(0,a.jsx)("li",{children:"• Contributed to algorithm design research"}),(0,a.jsx)("li",{children:"• Advanced our knowledge of decision-making"})]})]})]}),(0,a.jsx)("div",{className:"text-center pt-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"All data collected is anonymized and will be used solely for research purposes. Thank you for your valuable participation!"})})]})]})]})}async function ed(){let e=await fetch("".concat("https://knapsack-expirement.onrender.com","/api/v1/register"),{method:"POST"});if(!e.ok)throw Error("Failed to register participant");return(await e.json()).participantId}async function ex(e,s,t){let a=await fetch("".concat("https://knapsack-expirement.onrender.com","/api/v1/register-prolific"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prolificPid:e,studyId:s,sessionId:t})});if(!a.ok)throw Error("Failed to register Prolific participant");return(await a.json()).participantId}let em=[{id:"intro",name:"Welcome",icon:h.Z,color:"bg-blue-500"},{id:"tutorial",name:"Tutorial",icon:u.Z,color:"bg-green-500"},{id:"training1",name:"Practice",icon:g.Z,color:"bg-yellow-500"},{id:"training2",name:"Skills Test",icon:b.Z,color:"bg-orange-500"},{id:"benchmark",name:"Benchmark",icon:p.Z,color:"bg-purple-500"},{id:"strategy",name:"Strategy",icon:u.Z,color:"bg-indigo-500"},{id:"prediction",name:"Final Test",icon:g.Z,color:"bg-red-500"},{id:"results",name:"Results",icon:h.Z,color:"bg-emerald-500"}];function eh(){var e;let[s,t]=(0,r.useState)("intro"),[l,i]=(0,r.useState)(null),[n,c]=(0,r.useState)({totalScore:0,completedPhases:[],performance:{},benchmark:null}),[d,x]=(0,r.useState)({prolificPid:null,studyId:null,sessionId:null}),[h,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search),s=e.get("PROLIFIC_PID"),t=e.get("STUDY_ID"),a=e.get("SESSION_ID");x({prolificPid:s,studyId:t,sessionId:a}),s&&t&&a?(u(!0),ex(s,t,a).then(e=>{i(e)}).catch(console.error)):"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?(u(!0),ed().then(e=>{i(e)}).catch(console.error)):u(!1)},[]);let g=em.findIndex(e=>e.id===s),b=(g+1)/em.length*100,w=()=>{let e=g+1;e<em.length?t(em[e].id):y()},y=()=>{d.prolificPid&&(window.location.href="https://app.prolific.co/submissions/complete?cc=KNAPSACK2024")},N=e=>{c(s=>({...s,...e}))};return h?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:[(0,a.jsx)("header",{className:"bg-white/80 backdrop-blur-xl shadow-lg border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,a.jsx)(p.Z,{className:"h-7 w-7 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Knapsack Study"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Interactive Problem Solving"})]})]}),l&&(0,a.jsxs)(m,{variant:"outline",className:"text-sm bg-blue-50 border-blue-200 text-blue-700",children:["Participant ID: ",l]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Progress"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[g+1," / ",em.length]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Score"}),(0,a.jsx)("div",{className:"text-lg font-bold text-blue-600",children:n.totalScore})]})]})]})})}),(0,a.jsx)("div",{className:"bg-white/60 backdrop-blur-xl border-b border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:null===(e=em[g])||void 0===e?void 0:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full",children:[Math.round(b),"% Complete"]})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(o,{value:b,className:"h-3 bg-gray-200"})}),(0,a.jsx)("div",{className:"flex justify-between mt-6",children:em.map((e,s)=>{let t=e.icon,r=s===g,l=s<g;return(0,a.jsxs)(j.E.div,{className:"flex flex-col items-center",whileHover:{scale:1.05},transition:{duration:.2},children:[(0,a.jsx)("div",{className:"\n                    w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-lg transition-all duration-300\n                    ".concat(r?"bg-gradient-to-br from-blue-500 to-purple-600 ring-4 ring-blue-200":l?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gray-300","\n                  "),children:l?(0,a.jsx)(p.Z,{className:"h-6 w-6"}):(0,a.jsx)(t,{className:"h-6 w-6"})}),(0,a.jsx)("span",{className:"\n                    text-xs mt-2 text-center font-medium px-2 py-1 rounded-full\n                    ".concat(r?"text-blue-900 bg-blue-100":l?"text-green-900 bg-green-100":"text-gray-600","\n                  "),children:e.name})]},e.id)})})]})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)(f.M,{mode:"wait",children:(0,a.jsx)(j.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{duration:.4,ease:"easeInOut"},children:(()=>{let e={onNext:w,participantData:n,updateParticipantData:N};switch(s){case"intro":default:return(0,a.jsx)(q,{...e});case"tutorial":return(0,a.jsx)(Y,{...e});case"training1":return(0,a.jsx)(K,{...e});case"training2":return(0,a.jsx)(X,{...e});case"benchmark":return(0,a.jsx)(et,{...e});case"strategy":return(0,a.jsx)(ei,{...e,benchmarkData:n.benchmark||{}});case"prediction":return(0,a.jsx)(en,{...e});case"results":return(0,a.jsx)(eo,{...e})}})()},s)})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto p-8",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Access Restricted"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"This study can only be accessed through Prolific. Please use the link provided in your Prolific study invitation."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"If you believe this is an error, please contact the researcher."})]})})})}}},function(e){e.O(0,[562,971,117,744],function(){return e(e.s=6909)}),_N_E=e.O()}]);